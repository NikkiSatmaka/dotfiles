{{ if ne .chezmoi.os "windows" -}}
#!/usr/bin/env sh
# -*-mode:sh-*- vim:ft=shell-script

# ~/.local/share/chezmoi/run_once_85-install-doom-emacs.sh.tmpl
# ============================================================================
# Runs after `chezmoi apply` to install doom-emacs configureation file.
#
# This script clone the chemacs and doom emacs repository to its proper
# destination. Chezmoi will skip this script on other Windows.
# See https://www.chezmoi.io/docs/how-to/
#
# {{- /* This file supports Go's text/template language. */}}

destdir="~/.local/src/"
doomdir=~"/.local/src/doom-emacs"
chemacsdir="~/.local/src/chemacs"

[[ ! -d $destdir ]] && command mkdir -p $destdir
# rm -rf ${doomdir}
# rm -rf ${chemacsdir}

echo "Installing chemacs"

git clone --depth 1 https://github.com/plexus/chemacs.git "$chemacsdir"
cd "$chemacsdir"
./install.sh

echo "Installing doom-emacs"

git clone --depth 1 https://github.com/hlissner/doom-emacs "$doomdir"
${doomdir}/bin/doom install
{{- end }}
